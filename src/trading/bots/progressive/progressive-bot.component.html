@if (!isEditing()) {
  <div class="bot-content">
    <div class="bot-config">
      <div class="num-pairs-control">
        <span>Number of Pairs:</span>
        <button
          mat-icon-button
          (click)="decrementNumPairs()"
          [disabled]="isSaving() || bot().config.numPairs <= 1"
          type="button"
          matTooltip="Decrease number of pairs"
        >
          <mat-icon>remove</mat-icon>
        </button>
        <span>{{ bot().config.numPairs }}</span>
        <button mat-icon-button (click)="incrementNumPairs()" [disabled]="isSaving()" type="button" matTooltip="Increase number of pairs">
          <mat-icon>add</mat-icon>
        </button>
      </div>
      <div>Initial Δ: {{ bot().config.initialPercentDelta }}%</div>
      <div>Δ increment: {{ bot().config.deltaIncrement }}%</div>
      <div>Amount to buy: {{ bot().config.amountToBuy }}</div>
      <div>Earn in base asset: {{ bot().config.earnInBaseAsset ? 'Yes' : 'No' }}</div>
    </div>

    <app-bot-item-actions
      [showEdit]="true"
      [botId]="bot().id"
      (editClicked)="startEdit()"
      (showPairsClicked)="onShowPairs()"
    ></app-bot-item-actions>
  </div>
} @else {
  <div class="bot-content">
    <div class="edit-header">
      <h4>Edit Progressive Bot Configuration</h4>
    </div>

    @if (editForm(); as form) {
      <form [formGroup]="form" (ngSubmit)="requestSave()">
        <div class="edit-form">
          <div class="form-group">
            <label for="numPairs">Number of Pairs</label>
            <input id="numPairs" type="number" formControlName="numPairs" min="1" step="1" />
          </div>

          <div class="form-group">
            <label for="initialPercentDelta">Initial Percent Delta (%)</label>
            <input id="initialPercentDelta" type="number" formControlName="initialPercentDelta" step="0.01" />
          </div>

          <div class="form-group">
            <label for="deltaIncrement">Delta Increment (%)</label>
            <input id="deltaIncrement" type="number" formControlName="deltaIncrement" step="0.01" />
          </div>

          <div class="form-group">
            <label for="amountToBuy">Amount to Buy</label>
            <input id="amountToBuy" type="number" formControlName="amountToBuy" step="0.01" />
          </div>

          <div class="form-group">
            <label>
              <input type="checkbox" formControlName="earnInBaseAsset" />
              Earn in Base Asset
            </label>
          </div>
        </div>

        <div class="edit-actions">
          <button mat-button type="button" (click)="cancelEdit()">Cancel</button>
          <button mat-raised-button color="primary" type="button" [disabled]="!isFormValid() || isSaving()" (click)="requestSave()">
            {{ isSaving() ? 'Saving...' : 'Save' }}
          </button>
        </div>
      </form>
    }
  </div>
}
